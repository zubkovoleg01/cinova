{% extends 'cinova_app/base.html' %}
{% load static %}

{% block content %}
<section class="carousel-section">
    <div class="carousel">
        <div class="carousel-container">
            {% for poster in posters %}
            <div class="carousel-slide">
                <img src="{{ poster.image.url }}" alt="{{ poster.name }}">
            </div>
            {% endfor %}
        </div>
        <button class="carousel-prev"><i class="fas fa-chevron-left"></i></button>
        <button class="carousel-next"><i class="fas fa-chevron-right"></i></button>
    </div>
</section>


<section class="genres-section">
    <a class="link" href="#popular-slider">
        <div class="genre-block" id="genre-popular"><i class="fas fa-trophy"></i>&nbsp;Популярные</div>
    </a>
    <a class="link" href="#new-slider">
        <div class="genre-block" id="genre-new"><i class="fas fa-fire"></i>&nbsp;Новые</div>
    </a>
    <a class="link" href="{% url 'cinova:filtered_movies' 'боевик' %}">
        <div class="genre-block"><i class="fas fa-crosshairs"></i>&nbsp;Боевик</div>
    </a>
    <a class="link" href="{% url 'cinova:filtered_movies' 'комедия' %}">
        <div class="genre-block" id="genre--comedy"><i class="fas fa-dice"></i>&nbsp;Комедия</div>
    </a>
    <a class="link" href="{% url 'cinova:filtered_movies' 'ужасы' %}">
        <div class="genre-block" id="genre--horror"><i class="fas fa-ghost"></i>&nbsp;Ужасы</div>
    </a>
    <a class="link" href="{% url 'cinova:filtered_movies' 'приключения' %}">
        <div class="genre-block" id="genre--adventure"><i class="fas fa-earth-america"></i>&nbsp;Приключения</div>
    </a>
    <a class="link" href="{% url 'cinova:filtered_movies' 'детектив' %}">
        <div class="genre-block" id="genre--mystery"><i class="fas fa-user-secret"></i>&nbsp;Детектив</div>
    </a>
    <a class="link" href="{% url 'cinova:filtered_movies' 'фантастика' %}">
        <div class="genre-block" id="genre--sci-fi"><i class="fas fa-rocket"></i>&nbsp;Фантастика</div>
    </a>
</section>


<section id="popular-slider" class="popular-movie movie-grid">
    <div class="catalog-title">
        Популярные фильмы
    </div>
    <div class="slider-container" style="display: flex; overflow: hidden;">
        {% for movie in popular_movies %}
        <article class="movie-card slider">
            <img src="{{ movie.poster.url }}" alt="{{ movie.name }}">
            <div class="content">
                <h1>{{ movie.name }}</h1>
                <div class="infos">
                    <span>
                        {{ movie.rating.kp }}&nbsp;<i class="fas fa-star"></i>&nbsp;&nbsp;·&nbsp;&nbsp;{{ movie.year }}&nbsp;&nbsp;&nbsp;&nbsp;·&nbsp;&nbsp;{{ movie.movieLength }}м
                    </span>
                </div>
                <p class="synopsis">
                    {{ movie.description|truncatechars:250 }}
                </p>
                <div class="icons">
                    <form action="{% url 'cinova:add_to_favorites' movie.id %}" method="post">
                        {% csrf_token %}
                        <button type="submit"><i class="fas fa-heart"></i></button>
                    </form>
                    <a href="{% url 'cinova:movie_detail' movie.id %}"><i class="fas fa-eye"></i></a>
                </div>
            </div>
        </article>
        {% endfor %}
    </div>
    <button class="prev-button"><i class="fas fa-chevron-left"></i></button>
    <button class="next-button"><i class="fas fa-chevron-right"></i></button>
</section>

<section id="new-slider" class="new-movies movie-grid">
    <div class="catalog-title">
        Новинки
    </div>
    <div class="slider-container" style="display: flex; overflow: hidden;">
        {% for movie in new_movies %}
        <article class="movie-card slider">
            <img src="{{ movie.poster.url }}" alt="{{ movie.name }}">
            <div class="content">
                <h1>{{ movie.name }}</h1>
                <div class="infos">
                    <span>
                        {{ movie.rating.kp }}&nbsp;<i class="fas fa-star"></i>&nbsp;&nbsp;·&nbsp;&nbsp;{{ movie.year }}&nbsp;&nbsp;&nbsp;&nbsp;·&nbsp;&nbsp;{{ movie.movieLength }}м
                    </span>
                </div>
                <p class="synopsis">
                    {{ movie.description|truncatechars:250 }}
                </p>
                <div class="icons">
                    <form action="{% url 'cinova:add_to_favorites' movie.id %}" method="post">
                        {% csrf_token %}
                        <button type="submit"><i class="fas fa-heart"></i></button>
                    </form>
                    <a href="{% url 'cinova:movie_detail' movie.id %}"><i class="fas fa-eye"></i></a>
                </div>
            </div>
        </article>
        {% endfor %}
    </div>
    <button class="prev-button"><i class="fas fa-chevron-left"></i></button>
    <button class="next-button"><i class="fas fa-chevron-right"></i></button>
</section>

<section class="random-film movie-grid">
    <div class="catalog-title">
        Ваш случайный фильм на сегодня
    </div>
    <article class="movie-card random">
        <img src="{{ random_film.poster.url }}" alt="{{ random_film.name }}">
        <div class="content">
            <h1>{{ random_film.name }}</h1>

            <div class="infos">
                    <span>
                        {{ random_film.rating.kp }}&nbsp;<i class="fas fa-star"></i>&nbsp;&nbsp;·&nbsp;&nbsp;{{ random_film.year }}&nbsp;&nbsp;&nbsp;&nbsp;·&nbsp;&nbsp;{{ random_film.movieLength }}м
                    </span>
            </div>
            <p class="synopsis">
                {{ random_film.description|truncatechars:250 }}
            </p>
            <div class="icons">
                <form action="{% url 'cinova:add_to_favorites' random_film.id %}" method="post">
                    {% csrf_token %}
                    <button type="submit"><i class="fas fa-heart"></i></button>
                </form>
                <a href="{% url 'cinova:movie_detail' random_film.id %}"><i class="fas fa-eye"></i></a>
            </div>
        </div>
    </article>
</section>
<div class="scroll-to-top">
    <button id="myBtn" title="Наверх">
        <i class="fas fa-chevron-up"></i>
    </button>
</div>

{% endblock %}

