{% extends 'cinova_app/base.html' %}
{% load static %}

{% block content %}
<section class="movies movie-grid">
    <div class="sorting-options">
        <label for="sort_by">Сортировать по:</label>
        <select id="sort_by" name="sort_by">
            <option value="kp_rating">Рейтингу</option>
            <option value="year">Году выпуска</option>

        </select>
        <button id="apply_sort">Применить</button>
    </div>
    <div class="catalog-title">
      КАТАЛОГ ФИЛЬМОВ
    </div>

  {% for movie in movies.docs %}
<!--  <p>{{ movie.externalId.kpHD }}</p>-->
    <article class="movie-card ">
      <img src="{{ movie.poster.url }}" alt="{{ movie.name }}">

      <div class="content">
        <h1>{{ movie.name }}</h1>

        <div class="infos">
          <span>{{ movie.rating.kp }}&nbsp;<i class="fas fa-star"></i>&nbsp;&nbsp;·&nbsp;&nbsp;{{ movie.year }}&nbsp;&nbsp;·&nbsp;&nbsp;{{ movie.movieLength }}</span>
        </div>

        <p class="synopsis">
          {{ movie.description|truncatechars:250 }}
        </p>

        <div class="icons">
            <form action="{% url 'cinova:add_to_favorites' movie.id %}" method="post">
                {% csrf_token %}
                <button type="submit"><i class="fas fa-heart"></i></button>
            </form>
          <a href="{% url 'cinova:movie_detail' movie.id %}"><i class="fas fa-eye"></i></a>
        </div>
      </div>
    </article>
  {% endfor %}
<div class="pagination">
    <span class="step-links">
        {% if page_obj.has_previous %}
            <a href="?page=1">&laquo; first</a>
            <a href="?page={{ page_obj.previous_page_number }}">previous</a>
        {% endif %}

        <span class="current">
            Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
        </span>

        {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}">next</a>
            <a href="?page={{ page_obj.paginator.num_pages }}">last &raquo;</a>
        {% endif %}
    </span>
</div>
</section>

{% endblock %}